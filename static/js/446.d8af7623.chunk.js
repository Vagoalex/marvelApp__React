"use strict";(self.webpackChunkmarvel_app=self.webpackChunkmarvel_app||[]).push([[446],{1397:function(e,r,a){var n=a(5671),t=a(3144),s=a(136),c=a(2882),i=a(2791),o=a(9746),l=a(184),d={margin:"0 auto",width:"570px",height:"100%",padding:"25px",border:"2px solid #000",borderRadius:"15px",boxShadow:"5px 5px 20px rgba(0, 0, 0, 0.8)",background:"#232222",zIndex:"10",position:"relative"},u=function(e){(0,s.Z)(a,e);var r=(0,c.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return(e=r.call.apply(r,[this].concat(s))).state={error:!1},e}return(0,t.Z)(a,[{key:"componentDidCatch",value:function(e,r){console.log(e,r),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,l.jsx)("div",{style:d,children:(0,l.jsx)(o.Z,{})}):this.props.children}}]),a}(i.Component);r.Z=u},9746:function(e,r,a){var n=a(184);r.Z=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{style:{position:"absolute",left:"50%",bottom:"0%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#fff",fontWeight:700,textTransform:"uppercase",background:"#000",width:"50%",borderRadius:"14px",padding:"5px 0px"},children:["Oops!",(0,n.jsx)("br",{}),"Please, update your page :)"]}),(0,n.jsx)("img",{style:{margin:"0 auto",background:"none",display:"block",objectFit:"none",border:"10px solid #000",boxShadow:"15px 15px 20px rgba(0, 0, 0, 0.8)",width:"100%",height:"180px"},src:"https://i.gifer.com/fy3e.gif",alt:"error"})]})}},4942:function(e,r,a){a.r(r),a.d(r,{default:function(){return z}});var n=a(885),t=a(2791),s=a(4270),c=a(4595),i=a(5487),o=a(9746),l=a.p+"static/media/Marvel.f3c85a8b070a9f674cce.gif",d=a(184),u=function(){return(0,d.jsx)("img",{className:"LoadingMarvel",src:l,alt:"marvel loading"})},h=function(){return(0,d.jsxs)("section",{className:"Skeleton",children:[(0,d.jsx)("p",{className:"skeleton-select",children:"Please select a character to see information"}),(0,d.jsxs)("div",{className:"skeleton",children:[(0,d.jsxs)("div",{className:"pulse skeleton__header",children:[(0,d.jsx)("div",{className:"pulse skeleton__circle"}),(0,d.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,d.jsx)("div",{className:"pulse skeleton__block"}),(0,d.jsx)("div",{className:"pulse skeleton__block"}),(0,d.jsx)("div",{className:"pulse skeleton__block"})]})]})},m=function(e,r,a){switch(e){case"waiting":return(0,d.jsx)(h,{});case"loading":return(0,d.jsx)(u,{});case"error":return(0,d.jsx)(o.Z,{});case"confirmed":return(0,d.jsx)(r,{data:a});default:throw new Error("Unexpected process state!")}},f=a.p+"static/media/RandomChar-mjolnerShild.439ab19cfabed7d9d9b8.png",p=a.p+"static/media/marvelIcon.dd9b81e060c773c65315.jpg",x=function(e){var r=e.data,a=r.name,n=r.description,t=r.thumbnail,s=r.homepage,c=r.wiki,i=n.length>100?"".concat(n.slice(0,100),"..."):n,o="image_not_available.jpg"===t.slice(-23)?p:t;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{className:"character-img",src:o,alt:a}),(0,d.jsxs)("div",{className:"character-info",children:[(0,d.jsx)("h3",{className:"character-info__title",children:a}),(0,d.jsx)("p",{className:"character-info__desc",children:i}),(0,d.jsxs)("div",{className:"character-links",children:[(0,d.jsx)("a",{className:"character-links__link first-link button",href:s,target:"_blank",rel:"noreferrer",children:(0,d.jsx)("div",{className:"inner",children:"Homepage"})}),(0,d.jsx)("a",{className:"character-links__link second-link button button__secondary",href:c,target:"_blank",rel:"noreferrer",children:(0,d.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},j=function(e){var r=(0,t.useState)(null),a=(0,n.Z)(r,2),s=a[0],o=a[1],l=(0,t.useState)(!1),u=(0,n.Z)(l,2),h=u[0],p=u[1],j=(0,i.Z)(),v=j.getElementById,g=j.process,N=j.setProcess,_=j.clearError;(0,t.useEffect)((function(){k();var e=setInterval(k,12e4);return function(){clearInterval(e)}}),[]);var b=function(e){o(e),p(!0)},k=function(){_();var e=Math.floor(400*Math.random()+1011e3);v(e,"characters").then(b).then((function(){return N("confirmed")})),p(!1)};return(0,d.jsx)(c.Z,{in:h,timeout:500,classNames:"random-char-load",children:(0,d.jsxs)("section",{className:"RandomChar wrapper",children:[(0,d.jsx)("div",{className:"RandomChar__character-info",children:m(g,x,s)}),(0,d.jsxs)("div",{className:"RandomChar__randomizer",children:[(0,d.jsxs)("div",{className:"randomizer-top",children:[(0,d.jsx)("h3",{className:"randomizer-top__title random-title",children:"Random character for today!"}),(0,d.jsx)("h3",{className:"randomizer-top__title  random-title",children:"Do you want to get to know him better?"})]}),(0,d.jsxs)("div",{className:"randomizer-bottom",children:[(0,d.jsx)("h3",{className:"randomizer-bottom__title  random-title",children:"Or choose another one"}),(0,d.jsx)("button",{onClick:k,className:"randomizer-bottom__button button",type:"button",children:(0,d.jsx)("div",{className:"inner",children:"Try it"})})]}),(0,d.jsx)("img",{className:"randomizer-img",src:f,alt:"mjolnir"})]})]})})},v=a(5987),g=a(2982),N=function(e){var r=e.data,a=e.id,n=e.onCharSelected,t=r.name,s=r.thumbnail,c="image_not_available.jpg"===s.slice(-23)?p:s;return(0,d.jsxs)("li",{onClick:function(){return n(a)},className:"CharList-cards-item",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&n(a)},children:[(0,d.jsx)("img",{className:"CharList-cards-item__img",src:c,alt:"character: ".concat(t)}),(0,d.jsx)("h3",{className:"CharList-cards-item__title",children:t})]})},_=a(863),b=a(6968),k=["id"],C=function(e){var r=e.loading,a={src:_,alt:"loading gif",title:"Loading..."},n={src:b,alt:"error gif",title:"Load Error!"};return(0,d.jsxs)("div",{className:"CharList-cards-item ",children:[(0,d.jsx)("img",{className:"CharList-cards-item__img",src:r?a.src:n.src,alt:r?a.alt:n.alt}),(0,d.jsx)("h3",{className:"CharList-cards-item__title",children:r?a.title:n.title})]})},y=function(e){var r=(0,i.Z)(),a=r.getAllCharacters,s=r.loading,c=r.error,o=r.clearError,l=e.onCharSelected,u=(0,t.useState)([]),h=(0,n.Z)(u,2),m=h[0],f=h[1],p=(0,t.useState)(!1),x=(0,n.Z)(p,2),j=x[0],_=x[1],b=(0,t.useState)(0),y=(0,n.Z)(b,2),Z=y[0],w=y[1],S=(0,t.useState)(!1),E=(0,n.Z)(S,2),I=E[0],L=E[1],T=(0,t.useState)(0),F=(0,n.Z)(T,2),M=F[0],z=F[1];(0,t.useEffect)((function(){A()}),[]);var A=function(e){o(),_(!0),a(e).then(D),z(document.body.scrollHeight)},D=function(e){var r=!1;e.length<9&&(r=!0),f((function(r){return[].concat((0,g.Z)(r),(0,g.Z)(e))})),_((function(){return!1})),w((function(e){return e+9})),L((function(){return r}))},P=function(){window.scrollTo({top:0})},R=(0,t.useCallback)((function(){window.scrollTo(0,M)}),[M]);(0,t.useEffect)((function(){0!==m.length&&9!==m.length&&setTimeout(R,1500)}),[m.length,R]);var B=m.map((function(e){var r=e.id,a=(0,v.Z)(e,k);return(0,d.jsx)(N,{onCharSelected:l,data:a,id:r},r)})),q=(0,g.Z)(Array(0===m.length?9:m.length)).map((function(e,r){return(0,d.jsx)(C,{loading:s,error:c},r)})),H=c||s?q:null,O=c||s?null:B;return(0,d.jsxs)("section",{className:"CharList",children:[(0,d.jsxs)("ul",{className:"CharList-cards",children:[H,O]}),(0,d.jsxs)("div",{className:"CharList-assets",children:[(0,d.jsx)("button",{disabled:j,onClick:function(){return A(Z)},className:"CharList-cards-more button button__long",style:{visibility:I?"hidden":""},children:(0,d.jsx)("div",{className:"inner",children:"Load More"})}),(0,d.jsx)("button",{tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&P()},onClick:P,className:"CharList-scroll",children:(0,d.jsx)("span",{className:"CharList-scroll__up",children:(0,d.jsx)("span",{className:"mouse-wheel"})})})]})]})},Z=a(2506),w=a(1523),S=function(e){var r={};return e.charName||(r.charName="This field is required"),r},E=function(){var e=(0,t.useState)(null),r=(0,n.Z)(e,2),a=r[0],s=r[1],c=(0,i.Z)(),o=c.getCharacterByName,l=(c.loading,c.error,c.clearError),u=function(e){s(e)},h=(0,Z.TA)({initialValues:{charName:""},validate:S,onSubmit:function(e){return function(e){l(),o(e).then(u)}(e.charName)}}),m=a?a.length>0?(0,d.jsxs)("div",{className:"found-char",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"CharForm-desk found-char__desk",children:"There is!"}),(0,d.jsxs)("p",{className:"CharForm-desk found-char__desk",children:["Visit"," ",(0,d.jsx)("span",{className:"found-char__desk--charName",children:a[0].name})," ","page?"]})]}),(0,d.jsx)(w.rU,{to:"/characters/".concat(a[0].id),className:"button button__secondary found-char__button",type:"button",children:(0,d.jsx)("div",{className:"inner",children:"TO PAGE"})})]}):(0,d.jsx)("div",{className:"found-char",children:(0,d.jsx)("p",{className:"CharForm-desk CharForm-desk--error",children:"The character was not found. Check the name and try again"})}):null,f=h.touched.charName&&h.errors.charName?(0,d.jsx)("div",{className:"found-char",children:(0,d.jsx)("div",{className:"char-form__error CharForm-desk--error",children:h.errors.charName})}):null;return(0,d.jsxs)("div",{className:"CharForm",children:[(0,d.jsx)("h3",{className:"pulse CharForm__title",children:"Or find a character by name:"}),(0,d.jsxs)("form",{className:"char-form",onSubmit:h.handleSubmit,children:[(0,d.jsx)("input",{id:"charName",name:"charName",type:"text",className:"char-form__input",placeholder:"Enter name",value:h.values.charName,onChange:h.handleChange,onBlur:h.handleBlur}),(0,d.jsx)("button",{className:"button",type:"submit",children:(0,d.jsx)("div",{className:"inner",children:"FIND"})}),f]}),m]})},I=function(e){var r=e.data,a=r.name,n=r.description,t=r.thumbnail,s=r.homepage,c=r.wiki,i=r.comics,o=function(){window.scrollTo(0,document.body.scrollHeight)},l=i.map((function(e,r){var a=e.name;return(0,d.jsx)(L,{name:a},r)})),u="image_not_available.jpg"===t.slice(-23)?p:t,h=0===i.length?" hidden":"";return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"char-info",children:[(0,d.jsx)("button",{tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&o()},onClick:o,className:"CharInfo-scroll",children:(0,d.jsx)("span",{className:"CharInfo-scroll__bottom",children:(0,d.jsx)("span",{className:"mouse-wheel"})})}),(0,d.jsx)("img",{className:"char-info__img",src:u,alt:a}),(0,d.jsxs)("div",{className:"char-info-inner",children:[(0,d.jsx)("h3",{className:"char-info-inner__title",children:a}),(0,d.jsx)("a",{className:"char-info-inner__link button button__main",href:s,children:(0,d.jsx)("div",{className:"inner",children:"Homepage"})}),(0,d.jsx)("a",{className:"char-info-inner__link button button__secondary",href:c,children:(0,d.jsx)("div",{className:"inner",children:"Wiki"})})]})]}),(0,d.jsx)("div",{className:"char-info-desc",children:(0,d.jsx)("p",{className:"char-info-desc__paragraph",children:n})}),(0,d.jsxs)("div",{className:"char-info-comics ".concat(h),children:[(0,d.jsx)("h4",{className:"char-info-comics__title",children:"Comics:"}),(0,d.jsx)("ul",{className:"comics-list",children:l})]})]})},L=function(e){var r=e.name;return(0,d.jsx)("li",{className:"comics-list__item",children:r})},T=function(e){var r=(0,i.Z)(),a=r.getElementById,s=r.process,c=r.setProcess,o=r.clearError,l=(0,t.useState)(null),u=(0,n.Z)(l,2),h=u[0],f=u[1];(0,t.useEffect)((function(){p()}),[e.charID]);var p=function(){var r=e.charID;r&&(o(),a(r,"characters").then(x).then((function(){return c("confirmed")})))},x=function(e){f(e)};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("section",{className:"CharInfo",children:[(0,d.jsx)("div",{className:"CharInfo__content",children:m(s,I,h)}),(0,d.jsx)("div",{className:"CharInfo__form",children:(0,d.jsx)(E,{})})]})})},F=a(1397),M=a(8026),z=function(){var e=(0,t.useState)(null),r=(0,n.Z)(e,2),a=r[0],c=r[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(s.q,{children:[(0,d.jsx)("meta",{name:"description",content:"Main page - Characters from mini app Marvel App"}),(0,d.jsx)("title",{children:"Main page Characters"})]}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(j,{})}),(0,d.jsx)("div",{className:"container wrapper",children:(0,d.jsxs)("div",{className:"main__content",children:[(0,d.jsx)(F.Z,{children:(0,d.jsx)(y,{onCharSelected:function(e){c(e),window.scrollTo({top:150})}})}),(0,d.jsx)(F.Z,{children:(0,d.jsx)(T,{charID:a})}),(0,d.jsx)("img",{className:"decoration-vision",src:M,alt:"decoration-vision"})]})})]})}},5487:function(e,r,a){a.d(r,{Z:function(){return i}});var n=a(4165),t=a(5861),s=a(885),c=a(2791),i=function(){var e=function(){var e=(0,c.useState)(!1),r=(0,s.Z)(e,2),a=r[0],i=r[1],o=(0,c.useState)(null),l=(0,s.Z)(o,2),d=l[0],u=l[1],h=(0,c.useState)("waiting"),m=(0,s.Z)(h,2),f=m[0],p=m[1],x=(0,c.useCallback)(function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r){var a,t,s,c,o,l=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"GET",t=l.length>2&&void 0!==l[2]?l[2]:null,s=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"application/json"},i(!0),p("loading"),e.prev=5,e.next=8,fetch(r,{method:a,body:t,headers:s});case 8:if((c=e.sent).ok){e.next=11;break}throw new Error("Could not fetch ".concat(r,", status: ").concat(c.status));case 11:return e.next=13,c.json();case 13:return o=e.sent,i(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(5),i(!1),u(e.t0.message),p("error"),e.t0;case 24:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(r){return e.apply(this,arguments)}}(),[]);return{request:x,clearError:(0,c.useCallback)((function(){u(null),p("loading")}),[]),loading:a,error:d,process:f,setProcess:p}}(),r=e.request,a=e.process,i=e.setProcess,o=e.loading,l=e.error,d=e.clearError,u="https://gateway.marvel.com:443/v1/public/",h="characters",m=9,f=8,p=0,x="comics",j="af8551b0745198c417f5907893a2a765",v=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){var a,t,s,c,i,o,l=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:p,t=u,s=h,c=m,i=j,e.next=4,r("".concat(t).concat(s,"?limit=").concat(c,"&offset=").concat(a,"&apikey=").concat(i));case 4:return o=e.sent,e.abrupt("return",o.data.results.map(k));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){var a,t,s,c,i,o,l=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:p,t=u,s=x,c=f,i=j,e.next=4,r("".concat(t).concat(s,"?limit=").concat(c,"&offset=").concat(a,"&apikey=").concat(i));case 4:return o=e.sent,e.abrupt("return",o.data.results.map(b));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(a,t){var s,c,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=u,c=j,e.next=3,r("".concat(s).concat(t,"/").concat(a,"?apikey=").concat(c));case 3:if(i=e.sent,"characters"!==t){e.next=8;break}return e.abrupt("return",k(i.data.results[0]));case 8:if("comics"!==t){e.next=10;break}return e.abrupt("return",b(i.data.results[0]));case 10:case"end":return e.stop()}}),e)})));return function(r,a){return e.apply(this,arguments)}}(),_=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(a){var t,s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u,s=j,e.next=3,r("".concat(t,"characters?name=").concat(a,"&apikey=").concat(s));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(k));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),b=function(e){var r=e.id,a=e.title,n=e.thumbnail,t=e.urls,s=e.prices,c=e.description,i=e.pageCount,o=e.language;return{id:r,title:a,language:void 0===o?"EN-RU":o,pages:i,description:""===c||null===c?"This Marvel comic doesn't have description.":"".concat(c.slice(0,250),"..."),thumbnail:"".concat(n.path,".").concat(n.extension),homepage:t[0].url,comics:e.items,price:s[0].price}},k=function(e){var r=e.id,a=e.name,n=e.description,t=e.thumbnail,s=e.urls,c=e.comics;return{id:r,name:a,description:""===n?"This Marvel character doesn't have description.\n Please, click the links":n,thumbnail:"".concat(t.path,".").concat(t.extension),homepage:s[0].url,wiki:s[1].url,comics:c.items}};return{getAllComics:g,getAllCharacters:v,getElementById:N,getCharacterByName:_,process:a,setProcess:i,loading:o,error:l,clearError:d}}},863:function(e,r,a){e.exports=a.p+"static/media/CharListItemLoading.6cefb0de3a5c513193d1.gif"},6968:function(e,r,a){e.exports=a.p+"static/media/ironMan404.a42bbd2087ae7da19980.gif"},8026:function(e,r,a){e.exports=a.p+"static/media/decorationVision.8de497492999c5d20b03.png"}}]);
//# sourceMappingURL=446.d8af7623.chunk.js.map